common:
  depends_on: eeprom
  tags:
    - drivers
    - eeprom
tests:
  drivers.eeprom.api:
    # Tests overwrite EEPROM content, only run on select boards
    platform_allow:
      - native_posix
      - native_posix_64
      - native_sim
      - native_sim_64
      - qemu_x86
      - nucleo_l152re
      - nucleo_l073rz
      - s32z270dc2_rtu0_r52
      - s32z270dc2_rtu1_r52
      - s32z270dc2_rtu0_r52@D
      - s32z270dc2_rtu1_r52@D
    integration_platforms:
      - qemu_x86
  drivers.eeprom.api.w_at2x_emul:
    # Tests overwrite EEPROM content, only run on select boards
    extra_args:
      - DTC_OVERLAY_FILE=at2x_emul.overlay
      - OVERLAY_CONFIG=at2x_emul.conf
    platform_allow:
      - native_posix
      - native_posix_64
      - native_sim
      - native_sim_64
  drivers.eeprom.api.build:
    # Build-only test for boards with EEPROMs
    build_only: true
    platform_exclude:
      - native_sim
      - native_sim_64
      - qemu_x86
      - nucleo_l152re
      - nucleo_l073rz
