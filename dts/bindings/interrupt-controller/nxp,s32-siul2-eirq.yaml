# Copyright 2022-2023 NXP
#
# SPDX-License-Identifier: Apache-2.0

description: NXP S32 SIUL2 External Interrupts Request controller

compatible: "nxp,s32-siul2-eirq"

include: [interrupt-controller.yaml, pinctrl-device.yaml, base.yaml]

properties:
  reg:
    required: true

  reg-names:
    required: true

  pinctrl-0:
    required: true

  pinctrl-names:
    required: true

  filter-prescaler:
    type: int
    enum: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
    description: |
      Setting the prescaler which selects the clock for all digital filters.

  interrupt-names:
    description: |
      For platforms that external interrupt lines belong to different interrupt
      IDs (i.e. there is no single interrupt handler for all the lines), this
      property is used by the shim driver to determine the ISR name as defined
      by the HAL.

      The naming must follow: <from-line-number>_<to-line-number>, for example:
      interrupt-names = "0_7", "8_15", "16_23", "24_31";

child-binding:
  description: |
    NXP S32 SIUL2 External Interrupt line configuration. Specific filter
    requirements for each interrupt line can be specified by adding a child node
    to the interrupt controller, labeled `line_<line_number>`. For example:

      line_0: line_0 {
          filter-counter = <5>;
      };

    This will enable a digital filter counter on the corresponding interrupt
    pads to filter out glitches on the inputs. The digital filter will be
    disabled for interrupt lines without specified configuration node.

  properties:
    max-filter-counter:
      type: int
      required: true
      enum: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
      description: |
        Maximum Interrupt Filter Counter setting. This value configures the
        filter counter associated with the digital glitch filter.
        - A value of 0 to 2, sets the filter as an all pass filter.
        - A value of 3 to 15, sets the filter period to (TCK * MAXCNT + n * TCK)
          where:
          * n can be in the range 0 to 4, and accounts for the uncertainty
            factor in filter period calculation.
          * TCK is the prescaled filter clock period.

interrupt-cells:
  - gpio-pin
  - eirq-line
